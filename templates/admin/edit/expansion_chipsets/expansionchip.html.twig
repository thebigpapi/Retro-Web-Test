{% extends 'base.html.twig' %}

{% block title %}Manage expansion chipset{% endblock %}

{% block body %}
<div class="title" style="padding-top:5em;display:flex;justify-content:center;align-items:center;">
	<b>Edit:&nbsp;Expansion chipset&nbsp;&nbsp;</b>
	<button type="button" name="tabs" id="tab-nav-save" onclick="document.getElementById('expansion_chip_form_save').click();"><img src="{{ absolute_url(asset('build/icons/edit.svg')) }}" alt="" width="24" height="24"><span>Save</span></button>
</div>
{{ form_start(form, {'method': 'POST'}) }}
<div class="errors-div"><ul>
    {% for error in form.vars.errors.form.getErrors(true) %}
    <li>{{ error.message }}</li>
    {% endfor %}
</ul></div>
<div style="margin:0 auto;display:table;">
	<table>
        <tr>
			<td>{{form_label(form.chip.manufacturer)}}</td>
			<td>{{form_widget(form.chip.manufacturer)}}</td>
		</tr>
        <tr>
			<td>{{form_label(form.chip.name)}}</td>
			<td>{{form_widget(form.chip.name)}}</td>
		</tr>
		<tr>
			<td>{{form_label(form.type)}}</td>
			<td>{{form_widget(form.type)}}</td>
		</tr>
        <tr>
			<td>Part Number</td>
			<td>{{form_widget(form.chip.partNumber)}}</td>
		</tr>
	</table>
	<!-- PCI DEV -->
					<div class="quick-spec-table nopad" data-controller="collection">
						<div class="quick-spec-head editor">PCI DEV
						{% include 'macros/buttons.html.twig' with {'type':'add', 'action': 'chip.pciDevs'} %}</div>
						<div id="chip.pciDevs-fields-list" data-widget-counter="{{ form.chip.pciDevs|length }}" data-prototype="{{ form_widget(form.chip.pciDevs.vars.prototype, {'attr': {'style': 'display:inline-block;'}})|e }} 
							{% include 'macros/buttons.html.twig' with {'type':'del', 'count':1} %}">
							{% if form.chip.pciDevs is not empty %}
								{% for id in form.chip.pciDevs %}
									<div class="editor-row nopad">
										{{ form_widget(id, {'attr': {'style': 'display:inline-block;'}})|replace({'<option value="">': '<option label=" " value="">'})|raw }}
										{% include 'macros/buttons.html.twig' with {'type':'del', 'count':1} %}
									</div>
									{{ form_errors(id) }}
								{% endfor %}
							{% endif %}
							{{ form_errors(form.chip.pciDevs) }}
						</div>
					</div>
	<!-- Drivers -->
	<div data-controller="collection">
		<div style="padding-top:5px;">
			<img src="{{ absolute_url(asset('build/icons/show/hardware.svg')) }}" alt="" width="32" style="vertical-align: middle;padding-bottom: 10px;">
			<p style="display:inline-block;">Drivers: </p>
			{% include 'macros/buttons.html.twig' with {'type':'add', 'action': 'drivers'} %}
		</div>
		<div class="bios-image">
			<div class="bios-image-head editor-row drv">
				<div><b>File</b></div>
				<div><b>Recommended</b></div>
			</div>
			<div id="drivers-fields-list" data-widget-counter="{{ form.drivers|length }}" data-prototype="
				<div>{{ form_widget(form.drivers.vars.prototype.largeFile, {'attr': {'style': 'width:100%'}} )|e }}</div>
				<div style=display:flex;justify-content:center;>{{ form_widget(form.drivers.vars.prototype.isRecommended, {'attr': {'style': 'height:18px;width:18px;margin:0;'}} )|e }}</div>
				{% include 'macros/buttons.html.twig' with {'type':'del', 'count':1} %}
				" data-controller="collection">
				{% for driver in form.drivers %}
					<div class="editor-row drv nopad">
						<div>{{ form_widget(driver.largeFile, {'attr': {'style': 'width:100%'}} )|replace({'<option value="">': '<option label=" " value="">'})|raw }}</div>
						<div style="display:flex;justify-content:center;">{{ form_widget(driver.isRecommended, {'attr': {'style': 'height:18px;width:18px;margin:0;'}} ) }}</div>
						{% include 'macros/buttons.html.twig' with {'type':'del', 'count':1} %}
					</div>
					{{ form_errors(driver) }}
				{% endfor %}
			</div>
			{{ form_errors(form.drivers) }}
		</div>
	</div>
</div>
<div id="hiddenDiv" style="display: none;">{{form_widget(form.save) }}{{ form_end(form)|replace({'</form>': '</div></form>'})|raw }}
{% endblock %}