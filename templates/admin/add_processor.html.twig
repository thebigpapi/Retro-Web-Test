{% extends 'admin/header.html.twig' %}

{% block title %}Manage coprocessors{% endblock %}

{% block body %}
<div style="height:6em;"></div>

{{ form_start(form, {'method': 'POST'}) }}
<div class="editasset">
	<h2><b>{{form_label(form)}}</b></h2> {{form_widget(form.save)}}

	<div class="show-images" style="max-height:none">
		<div class="bar">
			<span style="padding-left:10px;">
				<b>Images</b>
				<button type="button" onclick="expand('images-fields-list')">Add</button>
			</span>
		</div>
        <div id="images-fields-list" data-widget-counter="{{ form.processingUnit.chip.images|length }}"
            data-prototype="
				<div class=imgp>{{ form_widget(form.processingUnit.chip.images.vars.prototype.imageFile, {'attr': {'style': 'width:100%'}})|e }}</div>
				<div class=imgp><span>Creditor: </span>{{ form_widget(form.processingUnit.chip.images.vars.prototype.creditor)|e }}</div>
				<div class=imgp><span>License: </span>{{ form_widget(form.processingUnit.chip.images.vars.prototype.license)|e }}</div>
				<div class=imgp><span>Notes: </span>{{ form_widget(form.processingUnit.chip.images.vars.prototype.description)|e }}</div>
				<div class=imgp>Uploaded file: 
					<button type=button onclick=this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode);>Delete this entry</button></div>
				<div class=imgp>{{ form_widget(form.processingUnit.chip.images.vars.prototype.file_name, {'attr': {'style': 'width:90%'}})|e }}</div>
				">
            {% for image in form.processingUnit.chip.images %}
			<div class="addform" >
				<div class="imgp">{{ form_widget(image.imageFile, {'attr': {'style': 'width:100%'}}) }}</div>
				<div class="imgp"><span>Creditor: </span>{{ form_widget(image.creditor)}}</div>
				<div class="imgp"><span>License: </span>{{ form_widget(image.license)}}</div>
				<div class="imgp"><span>Notes: </span>{{ form_widget(image.description)}}</div>
				<div class="imgp">Uploaded file: 
					<button type="button" onclick="this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode);">Delete this entry</button>
				</div>
				<div class="imgp">{{ form_widget(image.file_name, {'attr': {'style': 'width:90%'}}) }}</div>
			</div>
            {% endfor %}
			{{ form_errors(form.processingUnit.chip.images) }}
        </div>
	</div>
    <table class="editasset">
		
		<tr>
			<td>{{form_label(form.processingUnit.chip.manufacturer)}}</td>
			<td>{{form_widget(form.processingUnit.chip.manufacturer)}}</td>
		</tr>
		<tr>
			<td>{{form_label(form.processingUnit.chip.name)}}</td>
			<td>{{form_widget(form.processingUnit.chip.name)}}</td>
		</tr>
		<tr>
			<td>{{form_label(form.core)}}</td>
			<td>{{form_widget(form.core)}}</td>
		</tr>
		<tr>
			<td>Part number</td>
			<td>{{form_widget(form.processingUnit.chip.partNumber)}}</td>
		</tr>
		<tr>
			<td>{{form_label(form.processingUnit.chip.chipAliases)}} <button type="button" onclick="expand('chipAliases-fields-list')">Add</button> </td>
			<td class="append_table" id="chipAliases-fields-list" data-widget-counter="{{ form.processingUnit.chip.chipAliases|length }}"
        data-prototype="
			<div class=ba0>{{ form_widget(form.processingUnit.chip.chipAliases.vars.prototype.manufacturer, {'attr': {'style': 'width:100%'}} )|e }}</div>
			<div class=ba1>{{ form_widget(form.processingUnit.chip.chipAliases.vars.prototype.name, {'attr': {'style': 'width:100%'}} )|e }}</div>
			<div class=ba2>{{ form_widget(form.processingUnit.chip.chipAliases.vars.prototype.partNumber, {'attr': {'style': 'width:100%'}} )|e }}</div>
			<div class=ba3><button type=button onclick=this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode);>Del</button></div>
		">
			{% for alias in form.processingUnit.chip.chipAliases %}
			<div>
				<div class="ba0">{{ form_widget(alias.manufacturer, {'attr': {'style': 'width:100%'}} ) }}</div>
				<div class="ba1">{{ form_widget(alias.name, {'attr': {'style': 'width:100%'}} ) }}</div>
				<div class="ba1">{{ form_widget(alias.partNumber, {'attr': {'style': 'width:100%'}} ) }}</div>
				<div class="ba3"><button type="button" onclick="this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode);">Del</button></div>
				{{ form_errors(alias) }}
			</div>
			{% endfor %}
			</td>
		</tr>
		<tr>
			<td>{{form_label(form.processingUnit.speed)}}</td>
			<td>{{form_widget(form.processingUnit.speed)}}</td>
		</tr>
		<tr>
			<td>{{form_label(form.processingUnit.fsb)}}</td>
			<td>{{form_widget(form.processingUnit.fsb)}}</td>
		</tr>
        <tr>
			<td>{{form_label(form.processingUnit.platform)}}</td>
			<td>{{form_widget(form.processingUnit.platform)}}</td>
		</tr>
		<tr>
			<td>{{form_label(form.voltages)}} <button type="button" onclick="expand('voltages-fields-list')">Add</button> </td>
			<td class="append_table" id="voltages-fields-list" data-widget-counter="{{ form.voltages|length }}"
        data-prototype="
			<div class=ba0>{{ form_widget(form.voltages.vars.prototype.value, {'attr': {'style': 'width:100%'}} )|e }}V</div>
			<div class=ba3><button type=button onclick=this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode);>Del</button></div>
		">
			{% for voltage in form.voltages %}
			<div>
				<div class="ba0">{{ form_widget(voltage.value, {'attr': {'style': 'width:100%'}} ) }}V</div>
				<div class="ba3"><button type="button" onclick="this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode);">Del</button></div>
				{{ form_errors(voltage) }}
			</div>
			{% endfor %}
			</td>
		</tr>
		<tr>
			<td>{{form_label(form.tdp)}}</td>
			<td>{{form_widget(form.tdp)}} W</td>
		</tr>
		<tr>
			<td>{{form_label(form.processNode)}}</td>
			<td>{{form_widget(form.processNode)}} nm</td>
		</tr>
        <tr>
			<td>{{form_label(form.L1)}}</td>
			<td>{{form_widget(form.L1)}}</td>
		</tr>
        <tr>
			<td>{{form_label(form.L2)}}</td>
			<td>{{form_widget(form.L2)}}</td>
		</tr>
        <tr>
			<td>{{form_label(form.L3)}}</td>
			<td>{{form_widget(form.L3)}}</td>
		</tr>
		 <tr>
			<td>{{form_label(form.L1CacheMethod)}}</td>
			<td>{{form_widget(form.L1CacheMethod)}}</td>
		</tr>
        <tr>
			<td>{{form_label(form.L2CacheRatio)}}</td>
			<td>{{form_widget(form.L2CacheRatio)}}</td>
		</tr>
        <tr>
			<td>{{form_label(form.L3CacheRatio)}}</td>
			<td>{{form_widget(form.L3CacheRatio)}}</td>
		</tr>
	</table>
	<div>
		<p>Instruction sets:</p> 
		<button type="button" onclick="expand('instructionSets-fields-list')">Add instruction set</button>
		
        {{ form_errors(form.processingUnit.instructionSets) }}
        <div id="instructionSets-fields-list" data-widget-counter="{{ form.processingUnit.instructionSets|length }}"
            data-prototype="{{ form_widget(form.processingUnit.instructionSets.vars.prototype)|e }}
			<button type=button onclick=this.parentNode.parentNode.removeChild(this.parentNode);>Del</button>">
            {% for processorInstructionSet in form.processingUnit.instructionSets %}
            <div>
                {{ form_errors(processorInstructionSet) }}
                {{ form_widget(processorInstructionSet) }}
                <button type="button" onclick="this.parentNode.parentNode.removeChild(this.parentNode);">Del</button>
            </div>
            {% endfor %}
        </div>
	</div>  
</div>
<!-- {{ form_rest(form)|replace({'<input': ' --><input'})|raw }}
<script src="{% if app.request.attributes.get('_route') == "processor_edit" %}../{% endif %}../assets/add-collection-widget.js"></script>
{% endblock %}